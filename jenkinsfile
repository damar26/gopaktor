#!/usr/bin/env groovy

node {
    stage 'Build and Deploy'
    docker.image('dr.gopaktor.com/paktor/build-android:latest').inside {
        checkout scm

        sh "ls -al"
        sh "pwd"
        sh "export ANDROID_HOME=/opt/android-sdk-linux"
        sh "ls -al /opt/android-sdk-linux/platform-tools/api"
        sh "export JAVA_HOME=/usr/bin/java"
        sh "java -version"
        sh "android list sdk"
        sh "./gradlew clean"
        sh "echo y | sudo android update sdk --no-ui --filter 4,5,tool,platform-tool,doc"

    }
}
